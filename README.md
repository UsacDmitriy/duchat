# Duchat Reminder Bot

Простой Telegram-бот на `aiogram` 3 для создания напоминаний в личных чатах и группах. Бот хранит события в SQLite и периодически проверяет базу, чтобы вовремя присылать уведомления.

## Возможности
- Команды `/start`, `/new`, `/help` с меню для быстрого старта.
- Создание напоминаний через кнопку «⏰ Новое напоминание» или команду `/new`.
- Работа в групповых чатах: бот шлет уведомления в тот же чат, где создано событие.
- Фоновый воркер, который раз в заданный интервал отправляет просроченные напоминания и отмечает их как доставленные.

## Требования
- Python 3.10+
- Доступный Telegram Bot API токен от BotFather

## Установка
1. Клонируйте репозиторий и перейдите в каталог проекта.
2. Создайте виртуальное окружение и установите зависимости:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```
3. Скопируйте файл примера окружения и подставьте свой токен:
   ```bash
   cp .env.example .env
   ```
   Затем отредактируйте `.env`, задав `TELEGRAM_BOT_TOKEN`.

## Переменные окружения
| Имя | Описание | Значение по умолчанию |
| --- | --- | --- |
| `TELEGRAM_BOT_TOKEN` | Токен бота из BotFather | — |
| `REMINDER_DB_PATH` | Путь к SQLite файлу | `reminders.db` |
| `POLL_INTERVAL_SECONDS` | Как часто проверять базу на наличие просроченных напоминаний | `30` |

## Запуск
```bash
python -m app.bot
```
Бот создаст файл базы данных при первом запуске. Чтобы бот работал в группе, добавьте его и выдайте права на отправку сообщений.

## Как пользоваться
1. Введите `/start`, чтобы увидеть клавиатуру и подсказки.
2. Нажмите «⏰ Новое напоминание» или отправьте `/new`.
3. Отправьте текст события, затем дату и время в формате `YYYY-MM-DD HH:MM` (24 часа).
4. Дождитесь подтверждения с ID события. В указанное время бот пришлет уведомление в чат.

## Структура проекта
- `app/config.py` — загрузка настроек и путей к базе.
- `app/db.py` — создание схемы и операции с напоминаниями (добавление, выборка, отметка отправки).
- `app/bot.py` — точка входа, хендлеры aiogram и фоновый воркер рассылки.
- `requirements.txt` — список зависимостей.

## Разработка
- Код максимально прокомментирован и разделен по модулям.
- Для ускорения проверки можно уменьшить `POLL_INTERVAL_SECONDS` в `.env`.
- При остановке бота все данные остаются в SQLite и будут использованы при следующем запуске.
